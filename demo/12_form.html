<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>12_form</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
  </style>
  <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
  <script src="../node_modules/vue/dist/vue.js"></script>
  <script src="../node_modules/jquery/dist/jquery.js"></script>
  <script src="../node_modules/bootstrap/dist/js/bootstrap.js"></script>
</head>

<body>

  <div id="form">
    <div class="container">
      <form role="form">
        <div class="form-group">
          <label for="username">用户名:</label>
          <input type="text"  v-model="username" placeholder="请输入用户名"  class="form-control" id="username">
        </div>
        <div class="form-group">
          <label for="age">年龄:</label>
          <input type="text" v-model="age" placeholder="请输入年龄"  class="form-control" id="age">
        </div>
        <div class="form-group">
          <input type="button" class="btn btn-primary" @click="add()" value="添加" >
          <input type="reset" class="btn btn-danger"  value="重置" >
        </div>

      </form>
      <hr>
      <table class="table table-bordered table-hover">
        <caption class="h2 text-info text-center">用户信息表</caption>
        <!--table top-->
        <tr class="text-center">
          <th class="text-center">序号</th>
          <th class="text-center">名字</th>
          <th class="text-center">年龄</th>
          <th class="text-center">操作</th>
        </tr>
        <tr class="text-center" v-for="(item,key) in myData">
          <td>{{key+1}}</td>
          <td>{{item.name}}</td>
          <td>{{item.age}}</td>
          <td><button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#layer" @click="nowIndex=key">删除</button></td>
        </tr>
        <!--del all-->
        <tr v-show="myData.length!=0">
          <td colspan="4" class="text-right">
            <button class="btn btn-danger" data-toggle="modal" data-target="#layer" @click="nowIndex=-2">删除全部</button>
          </td>
        </tr>
        <!--tip-->
        <tr v-show="myData.length==0">
          <td colspan="4" class="text-center text-muted">
            <p>暂无数据..</p>
          </td>
        </tr>
      </table>


      <!--pop musk-->
      <div role="dialog" class="modal fade" id="layer" data-index="1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type=button"" class="close" data-dismiss="modal">
                <span>&times;</span>
              </button>
              <h4 class="modal-title">确认删除吗?</h4>
            </div>
            <div class="modal-body">
              <button class="btn btn-primary btn-sm" data-dismiss="modal">取消</button>
              <button class="btn btn-danger btn-sm" data-dismiss="modal" @click="del(nowIndex)">确认</button>
            </div>
          </div>
        </div>
      </div>
    </div>


  </div>

</body>

<script>
  window.onload=function () {

    var app = new Vue({
      el: "#form",
      data: {
        nowIndex: -100,
        username: "zhaotiezhu",
        age: 11,
        myData: [
          {name: "xiaohua", age: 23, num: 1},
          {name: "xiaoming", age: 21, num: 2},
          {name: "xiaoli", age: 22, num: 3},
        ]
      },
      methods: {
        //add
        add: function () {
          this.myData.push({
            name: this.username,
            age: this.age,
          })
          this.username = ""
          this.age = ""
        },
        //del
        del:function (num) {
          if(num==-2){
            this.myData=[];
          }else{
            this.myData.splice(num,1)
          }
        },
        //delAll
        delAll:function () {
          this.myData=[];
        }
      }
    });
}

</script>

</html>




